## 常见web安全问题

#### 1：SQL注入

定义：由于程序中对用户输入检查不严格，用户可以提交一段数据库查询代码，根据程序返回的结果，获取某些他想知道的数据



预防措施：
	1：严格限定参数类型，明确参数检验的边界，必须在服务端进行数据校验

​	2：采用参数化查询方法（参数化查询的好处：https://www.cnblogs.com/kdp0213/p/8554032.html）（推荐）

​	3：数据库加固

#### 2：跨站脚本漏洞（XSS）

定义：恶意攻击者往web页面里面恶意的插入html代码，当用户浏览该页面时，嵌入到html中的代码会被执行，从而达到恶意用户的特殊目的；XSS通常分为持久型XSS，非持久型XSS。

持久型XSS：是指通过提交恶意数据到服务器，通过web应用程序输出恶意数据到页面

非持久型XSS：指浏览器每次都要在参数中恶意提交数据才能触发跨站脚本漏洞（XSS）



预防措施：
	1：输入编码：可以有全局的解决方案，从设计的角度来说，是最佳的，且数据库一旦数据已经入库，就难以用输出编码处理

​	2：输出编码：输出编码有助于开发者细粒度的控制输出，但也导致了工作量的增加，输出编码可以处理输入编码方式无法解决的已入库的数据



#### 3：跨站请求伪造（XSRF）

风险：可能会窃取或操纵客户会话，和cookie，他们可能用于模仿合法用户，从而使黑客能以该身份查看或者变更用户记录以及执行事务

出现原因：应用程序使用的认证方法不充分

典型的攻击方式：

1. 在页面中加入一个<img>标签，浏览器会发送一个请求，获取其src属性引用的值
2. 攻击者将敏感操作的URI作为src属性的值
3. 继承cookie，以浏览者的身份作敏感访问并执行操作
4. 危害：这种操作会在用户无意识的情况下发生

预防措施：

1. ​	检查HTTP头部的Refer信息，Server在接收到请求之后，可以去检查这个头部的信息，只接受来自本域的请求忽略外部的请求。
2. 使用一次性令牌，每次请求都带上由服务器随机生成的参数，然后再服务器核对参数，如果和下发的随机数不同，则可以认为有人在伪造请求，请求不能通过。



#### 4：文件上传漏洞

常见验证错误：
	1：允许上传可执行文件

​	2：使用客户端JS验证上传的文件类型

​	3：使用黑名单限制上传的文件类型

​	4：文件名/存储目录名可自定义

​	5：文件名中特殊字符处理不当



预防措施：

​	1：编码者需要对上传的页面代码把关，在保存文件时，考虑可能出现的异常字符

​	2：对文件的扩展名检查要采取"允许.jpg，.gif"，不要采取"不允许asp"这样的检查

​	3：最好对上传文件的目录设置不可执行，这可以通过web服务器配置加固实现（如nginx配置）